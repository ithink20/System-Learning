package main

import "testing"

func BenchmarkStringParse(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		body := "[\"10;1160;462;137;2;49;14;0;0;1;138;32;1053;0;3;37;8\",\"vikas-test\",\"__LOCALE__null=SG; csrftoken=X2wOktygIduHwe2Zds5mMnIXyiB6mbwI; _gcl_au=1.1.1648155970.1690254295; SPC_T_IV=RGp1ZTBtUXF3Z1cxZjNPcg==; SPC_SI=Lu6wZAAAAABtQWRlblExbJRSqgIAAAAAU09vSDU4ZVk=; SPC_F=VrnSi26BC9OoaxewpO0q60KDmpJgG1ko; REC_T_ID=0812da37-2a98-11ee-b0ab-3e0427df20f5; SPC_R_T_ID=DJLbTOEPIPqE9ATl3cBPQLqPIjErTfCKBmGz5o9g7luvHZ2iZzTAezcLUWv2P+oG6TDFp+jFdNuQgtTf2ChrTrTp33K8CH61vFi7wFOuKdrrvaYJU59VV8ZTsgeQKx0lUhT4QJB9WkO8ZnLLgJci+qHgm/d12VqOclzjO9VwSQM=; SPC_R_T_IV=RGp1ZTBtUXF3Z1cxZjNPcg==; SPC_T_ID=DJLbTOEPIPqE9ATl3cBPQLqPIjErTfCKBmGz5o9g7luvHZ2iZzTAezcLUWv2P+oG6TDFp+jFdNuQgtTf2ChrTrTp33K8CH61vFi7wFOuKdrrvaYJU59VV8ZTsgeQKx0lUhT4QJB9WkO8ZnLLgJci+qHgm/d12VqOclzjO9VwSQM=; _QPWSDCXHZQA=6ffaf0c6-86a7-4f45-fde0-23d9edd08e08; AMP_TOKEN=%24NOT_FOUND; _gid=GA1.2.872370811.1690254360; _dc_gtm_UA-125099498-1=1; studio_webUnique_ccd=FxuNEaNRJXycjOEBANcitQ%3D%3D%7Cg8aFyUDF%2FHHpjNHbQHXQm0grj%2F%2FJOjXixuW4%2B4F8RD3IPm7UXYfsfkmDnRArx9UfPCqL%2FbNFqPPImeJx%7CFtcd62SjXM98Xeah%7C08%7C3; ds=290425dd546d9437721b5cded7f92b40; _ga=GA1.2.460650685.1690254296; _ga_CGXK257VSB=GS1.1.1690254295.1.1.1690254385.45.0.0; _ga_PN56VNNPQX=GS1.2.1690254360.1.1.1690254392.0.0.0\",\"https://demo.studio.sg/api/v4/search/test-vikas-custom-path?by=relevancy\\u0026extra_params=%7B%22global_search_session_id%22%3A%22gs-4e4593e7-5f20-49ba-a8eb-e707724cf1d6%22%2C%22search_session_id%22%3A%22ss-e24f7a98-3dfa-43ed-a631-04a63a7542c5%22%7D\\u0026keyword=test_postman_at_testtest019\\u0026limit=20\\u0026newest=0\\u0026order=desc\\u0026page_type=search\\u0026scenario=PAGE_GLOBAL_SEARCH\\u0026version=2\\u0026view_session_id=8cf19899-c954-4eaa-94df-0942e402de9f\",\"Mozilla/5.0 (Linux; Android 8.0.0; SM-G955U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Mobile Safari/537.36\",\"SG\",\"https://demo.studio.sg/search?keyword=hinthint009\",\"143.92.111.111\",\"\",\"\",\"0\",\"771,4865-4866-4867-49199-49195-49200-49196-52393-52392-49161-49171-49162-49172-156-157-47-53-10,0-23-65281-10-11-35-13-51-45-43,29-23-24,0\",\"dda262729e5413660ec0e6a8d4279860\",\"{\\\"sec-ch-ua-platform\\\":\\\"\\\\\\\"Android\\\\\\\"\\\",\\\"sz-token\\\":\\\"\\\\/KHejAJT2i7\\\\/R7G7fTnkTA==|BzJe4zN+ST7s1dicSxA10B4YU2usLOr\\\\/U5SG8vKoTEGDbet4TlJANyXYQQJtaeolfDjwVFDJtxpLeQrl|HSF0grphDm4dZFxp|08|3\\\",\\\"host\\\":\\\"test.studio.sg\\\",\\\"sec-fetch-dest\\\":\\\"empty\\\",\\\"x-api-source\\\":\\\"rweb\\\",\\\"accept-language\\\":\\\"en,zh-CN;q=0.9,zh;q=0.8,ja;q=0.7\\\",\\\"content-type\\\":\\\"application\\\\/json\\\",\\\"connection\\\":\\\"keep-alive\\\",\\\"x-csrftoken\\\":\\\"aI9t9VIyuiAasYEQstZ4D71A0oDw6jSb\\\",\\\"x-studio-language\\\":\\\"en\\\",\\\"sec-fetch-site\\\":\\\"same-origin\\\",\\\"accept-encoding\\\":\\\"gzip, deflate, br\\\",\\\"x-requested-with\\\":\\\"XMLHttpRequest\\\",\\\"af-ac-enc-sz-token\\\":\\\"\\\\/KHejAJT2i7\\\\/R7G7fTnkTA==|BzJe4zN+ST7s1dicSxA10B4YU2usLOr\\\\/U5SG8vKoTEGDbet4TlJANyXYQQJtaeolfDjwVFDJtxpLeQrl|HSF0grphDm4dZFxp|08|3\\\",\\\"x-sz-sdk-version\\\":\\\"2.9.2-2\\u00261.4.1\\\",\\\"sec-fetch-mode\\\":\\\"cors\\\",\\\"sec-ch-ua-mobile\\\":\\\"?1\\\",\\\"authority\\\":\\\"test.studio.sg\\\",\\\"sec-ch-ua\\\":\\\"\\\\\\\"Not.A\\\\/Brand\\\\\\\";v=\\\\\\\"8\\\\\\\", \\\\\\\"Chromium\\\\\\\";v=\\\\\\\"114\\\\\\\", \\\\\\\"Google Chrome\\\\\\\";v=\\\\\\\"114\\\\\\\"\\\",\\\"accept\\\":\\\"application\\\\/json\\\"}\",\"\",\"GET\",\"/api/v4/search/test-vikas-custom-path\",\"HTTP/1.1\"]"
		req, index := CustomSplitV2(body)
		bindRequestPayload(body, req, index)
	}
}

func BenchmarkUnmarshal(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		body := "[\"vikas-test\",\"__LOCALE__null=SG; csrftoken=X2wOktygIduHwe2Zds5mMnIXyiB6mbwI; _gcl_au=1.1.1648155970.1690254295; SPC_T_IV=RGp1ZTBtUXF3Z1cxZjNPcg==; SPC_SI=Lu6wZAAAAABtQWRlblExbJRSqgIAAAAAU09vSDU4ZVk=; SPC_F=VrnSi26BC9OoaxewpO0q60KDmpJgG1ko; REC_T_ID=0812da37-2a98-11ee-b0ab-3e0427df20f5; SPC_R_T_ID=DJLbTOEPIPqE9ATl3cBPQLqPIjErTfCKBmGz5o9g7luvHZ2iZzTAezcLUWv2P+oG6TDFp+jFdNuQgtTf2ChrTrTp33K8CH61vFi7wFOuKdrrvaYJU59VV8ZTsgeQKx0lUhT4QJB9WkO8ZnLLgJci+qHgm/d12VqOclzjO9VwSQM=; SPC_R_T_IV=RGp1ZTBtUXF3Z1cxZjNPcg==; SPC_T_ID=DJLbTOEPIPqE9ATl3cBPQLqPIjErTfCKBmGz5o9g7luvHZ2iZzTAezcLUWv2P+oG6TDFp+jFdNuQgtTf2ChrTrTp33K8CH61vFi7wFOuKdrrvaYJU59VV8ZTsgeQKx0lUhT4QJB9WkO8ZnLLgJci+qHgm/d12VqOclzjO9VwSQM=; _QPWSDCXHZQA=6ffaf0c6-86a7-4f45-fde0-23d9edd08e08; AMP_TOKEN=%24NOT_FOUND; _gid=GA1.2.872370811.1690254360; _dc_gtm_UA-125099498-1=1; studio_webUnique_ccd=FxuNEaNRJXycjOEBANcitQ%3D%3D%7Cg8aFyUDF%2FHHpjNHbQHXQm0grj%2F%2FJOjXixuW4%2B4F8RD3IPm7UXYfsfkmDnRArx9UfPCqL%2FbNFqPPImeJx%7CFtcd62SjXM98Xeah%7C08%7C3; ds=290425dd546d9437721b5cded7f92b40; _ga=GA1.2.460650685.1690254296; _ga_CGXK257VSB=GS1.1.1690254295.1.1.1690254385.45.0.0; _ga_PN56VNNPQX=GS1.2.1690254360.1.1.1690254392.0.0.0\",\"https://demo.studio.sg/api/v4/search/test-vikas-custom-path?by=relevancy\\u0026extra_params=%7B%22global_search_session_id%22%3A%22gs-4e4593e7-5f20-49ba-a8eb-e707724cf1d6%22%2C%22search_session_id%22%3A%22ss-e24f7a98-3dfa-43ed-a631-04a63a7542c5%22%7D\\u0026keyword=test_postman_at_testtest019\\u0026limit=20\\u0026newest=0\\u0026order=desc\\u0026page_type=search\\u0026scenario=PAGE_GLOBAL_SEARCH\\u0026version=2\\u0026view_session_id=8cf19899-c954-4eaa-94df-0942e402de9f\",\"Mozilla/5.0 (Linux; Android 8.0.0; SM-G955U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Mobile Safari/537.36\",\"SG\",\"https://demo.studio.sg/search?keyword=hinthint009\",\"143.92.111.111\",\"\",\"\",\"0\",\"771,4865-4866-4867-49199-49195-49200-49196-52393-52392-49161-49171-49162-49172-156-157-47-53-10,0-23-65281-10-11-35-13-51-45-43,29-23-24,0\",\"dda262729e5413660ec0e6a8d4279860\",\"{\\\"sec-ch-ua-platform\\\":\\\"\\\\\\\"Android\\\\\\\"\\\",\\\"sz-token\\\":\\\"\\\\/KHejAJT2i7\\\\/R7G7fTnkTA==|BzJe4zN+ST7s1dicSxA10B4YU2usLOr\\\\/U5SG8vKoTEGDbet4TlJANyXYQQJtaeolfDjwVFDJtxpLeQrl|HSF0grphDm4dZFxp|08|3\\\",\\\"host\\\":\\\"test.studio.sg\\\",\\\"sec-fetch-dest\\\":\\\"empty\\\",\\\"x-api-source\\\":\\\"rweb\\\",\\\"accept-language\\\":\\\"en,zh-CN;q=0.9,zh;q=0.8,ja;q=0.7\\\",\\\"content-type\\\":\\\"application\\\\/json\\\",\\\"connection\\\":\\\"keep-alive\\\",\\\"x-csrftoken\\\":\\\"aI9t9VIyuiAasYEQstZ4D71A0oDw6jSb\\\",\\\"x-studio-language\\\":\\\"en\\\",\\\"sec-fetch-site\\\":\\\"same-origin\\\",\\\"accept-encoding\\\":\\\"gzip, deflate, br\\\",\\\"x-requested-with\\\":\\\"XMLHttpRequest\\\",\\\"af-ac-enc-sz-token\\\":\\\"\\\\/KHejAJT2i7\\\\/R7G7fTnkTA==|BzJe4zN+ST7s1dicSxA10B4YU2usLOr\\\\/U5SG8vKoTEGDbet4TlJANyXYQQJtaeolfDjwVFDJtxpLeQrl|HSF0grphDm4dZFxp|08|3\\\",\\\"x-sz-sdk-version\\\":\\\"2.9.2-2\\u00261.4.1\\\",\\\"sec-fetch-mode\\\":\\\"cors\\\",\\\"sec-ch-ua-mobile\\\":\\\"?1\\\",\\\"authority\\\":\\\"test.studio.sg\\\",\\\"sec-ch-ua\\\":\\\"\\\\\\\"Not.A\\\\/Brand\\\\\\\";v=\\\\\\\"8\\\\\\\", \\\\\\\"Chromium\\\\\\\";v=\\\\\\\"114\\\\\\\", \\\\\\\"Google Chrome\\\\\\\";v=\\\\\\\"114\\\\\\\"\\\",\\\"accept\\\":\\\"application\\\\/json\\\"}\",\"\",\"GET\",\"/api/v4/search/test-vikas-custom-path\",\"HTTP/1.1\"]"
		bindTSSRequestV2(body)
	}
}

func BenchmarkSonic(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		body := "[\"vikas-test\",\"__LOCALE__null=SG; csrftoken=X2wOktygIduHwe2Zds5mMnIXyiB6mbwI; _gcl_au=1.1.1648155970.1690254295; SPC_T_IV=RGp1ZTBtUXF3Z1cxZjNPcg==; SPC_SI=Lu6wZAAAAABtQWRlblExbJRSqgIAAAAAU09vSDU4ZVk=; SPC_F=VrnSi26BC9OoaxewpO0q60KDmpJgG1ko; REC_T_ID=0812da37-2a98-11ee-b0ab-3e0427df20f5; SPC_R_T_ID=DJLbTOEPIPqE9ATl3cBPQLqPIjErTfCKBmGz5o9g7luvHZ2iZzTAezcLUWv2P+oG6TDFp+jFdNuQgtTf2ChrTrTp33K8CH61vFi7wFOuKdrrvaYJU59VV8ZTsgeQKx0lUhT4QJB9WkO8ZnLLgJci+qHgm/d12VqOclzjO9VwSQM=; SPC_R_T_IV=RGp1ZTBtUXF3Z1cxZjNPcg==; SPC_T_ID=DJLbTOEPIPqE9ATl3cBPQLqPIjErTfCKBmGz5o9g7luvHZ2iZzTAezcLUWv2P+oG6TDFp+jFdNuQgtTf2ChrTrTp33K8CH61vFi7wFOuKdrrvaYJU59VV8ZTsgeQKx0lUhT4QJB9WkO8ZnLLgJci+qHgm/d12VqOclzjO9VwSQM=; _QPWSDCXHZQA=6ffaf0c6-86a7-4f45-fde0-23d9edd08e08; AMP_TOKEN=%24NOT_FOUND; _gid=GA1.2.872370811.1690254360; _dc_gtm_UA-125099498-1=1; studio_webUnique_ccd=FxuNEaNRJXycjOEBANcitQ%3D%3D%7Cg8aFyUDF%2FHHpjNHbQHXQm0grj%2F%2FJOjXixuW4%2B4F8RD3IPm7UXYfsfkmDnRArx9UfPCqL%2FbNFqPPImeJx%7CFtcd62SjXM98Xeah%7C08%7C3; ds=290425dd546d9437721b5cded7f92b40; _ga=GA1.2.460650685.1690254296; _ga_CGXK257VSB=GS1.1.1690254295.1.1.1690254385.45.0.0; _ga_PN56VNNPQX=GS1.2.1690254360.1.1.1690254392.0.0.0\",\"https://demo.studio.sg/api/v4/search/test-vikas-custom-path?by=relevancy\\u0026extra_params=%7B%22global_search_session_id%22%3A%22gs-4e4593e7-5f20-49ba-a8eb-e707724cf1d6%22%2C%22search_session_id%22%3A%22ss-e24f7a98-3dfa-43ed-a631-04a63a7542c5%22%7D\\u0026keyword=test_postman_at_testtest019\\u0026limit=20\\u0026newest=0\\u0026order=desc\\u0026page_type=search\\u0026scenario=PAGE_GLOBAL_SEARCH\\u0026version=2\\u0026view_session_id=8cf19899-c954-4eaa-94df-0942e402de9f\",\"Mozilla/5.0 (Linux; Android 8.0.0; SM-G955U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Mobile Safari/537.36\",\"SG\",\"https://demo.studio.sg/search?keyword=hinthint009\",\"143.92.111.111\",\"\",\"\",\"0\",\"771,4865-4866-4867-49199-49195-49200-49196-52393-52392-49161-49171-49162-49172-156-157-47-53-10,0-23-65281-10-11-35-13-51-45-43,29-23-24,0\",\"dda262729e5413660ec0e6a8d4279860\",\"{\\\"sec-ch-ua-platform\\\":\\\"\\\\\\\"Android\\\\\\\"\\\",\\\"sz-token\\\":\\\"\\\\/KHejAJT2i7\\\\/R7G7fTnkTA==|BzJe4zN+ST7s1dicSxA10B4YU2usLOr\\\\/U5SG8vKoTEGDbet4TlJANyXYQQJtaeolfDjwVFDJtxpLeQrl|HSF0grphDm4dZFxp|08|3\\\",\\\"host\\\":\\\"test.studio.sg\\\",\\\"sec-fetch-dest\\\":\\\"empty\\\",\\\"x-api-source\\\":\\\"rweb\\\",\\\"accept-language\\\":\\\"en,zh-CN;q=0.9,zh;q=0.8,ja;q=0.7\\\",\\\"content-type\\\":\\\"application\\\\/json\\\",\\\"connection\\\":\\\"keep-alive\\\",\\\"x-csrftoken\\\":\\\"aI9t9VIyuiAasYEQstZ4D71A0oDw6jSb\\\",\\\"x-studio-language\\\":\\\"en\\\",\\\"sec-fetch-site\\\":\\\"same-origin\\\",\\\"accept-encoding\\\":\\\"gzip, deflate, br\\\",\\\"x-requested-with\\\":\\\"XMLHttpRequest\\\",\\\"af-ac-enc-sz-token\\\":\\\"\\\\/KHejAJT2i7\\\\/R7G7fTnkTA==|BzJe4zN+ST7s1dicSxA10B4YU2usLOr\\\\/U5SG8vKoTEGDbet4TlJANyXYQQJtaeolfDjwVFDJtxpLeQrl|HSF0grphDm4dZFxp|08|3\\\",\\\"x-sz-sdk-version\\\":\\\"2.9.2-2\\u00261.4.1\\\",\\\"sec-fetch-mode\\\":\\\"cors\\\",\\\"sec-ch-ua-mobile\\\":\\\"?1\\\",\\\"authority\\\":\\\"test.studio.sg\\\",\\\"sec-ch-ua\\\":\\\"\\\\\\\"Not.A\\\\/Brand\\\\\\\";v=\\\\\\\"8\\\\\\\", \\\\\\\"Chromium\\\\\\\";v=\\\\\\\"114\\\\\\\", \\\\\\\"Google Chrome\\\\\\\";v=\\\\\\\"114\\\\\\\"\\\",\\\"accept\\\":\\\"application\\\\/json\\\"}\",\"\",\"GET\",\"/api/v4/search/test-vikas-custom-path\",\"HTTP/1.1\"]"
		bindTSSRequestV3(body)
	}
}

func BenchmarkEncode(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		headerEncode()
	}
}

func BenchmarkDecode(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		headerDecode()
	}
}

func BenchmarkEncodeUnmarshal(b *testing.B) {
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		headerEncode()
		headerUnMarshal()
	}
}
